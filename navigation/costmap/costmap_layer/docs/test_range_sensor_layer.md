

## range_sensor_layer 测试用例

> 开发人员： @wuhuabo 测试人员： @wuhuabo

### 1. 初始化range_sensor_layer 测试用例

> 功能描述： 初始化range_sensor_layer; CostmapParameters, LayeredCostmap未初始化时, 初始化失败

| 编号 | 输入/动作                                    | 期望的输出/响应              | 实际情况 |
| ---- | -------------------------------------------- | ---------------------------- | -------- |
| 1    | 初始化range_sensor_layer, CostmapParameters, LayeredCostmap未初始化| 初始化失败 | 符合     |
| 2    | 初始化range_sensor_layer, LayeredCostmap未初始化| 初始化失败 | 符合     |
| 3    | 初始化range_sensor_layer, CostmapParameters, LayeredCostmap均初始化| 初始化成功 | 符合     |

### 2. handleRangeData 测试用例

> 功能描述： 由超声数据获取速度状态, 状态为Stop返回true, 否则为false

初始化range_sensor_layer, 停障区{(-2.0, 2.0), (2.0, 2.0), (2.0, -2.0), (-2.0, -2.0)}, 减速区{(-4.0, 4.0), (4.0, 4.0), (4.0, -4.0), (-4.0, -4.0)},
超声数据范围0-8, 波束角60度
| 编号 | 输入/动作                                                              | 期望的输出/响应                                                         | 实际情况 |
| ---- | ---------------------------------------------------------------------- | ----------------------------------------------------------------------- | -------- |
| 1    | 超声数据原点(0, 0, 0), 距离3.0 | 结果false, 速度状态SpeedOne | 符合     |
| 2    | 超声数据原点(0, 0, 0), 距离1.0 | 结果true, 速度状态Stop | 符合     |
| 3    | 超声数据原点(0, 0, 0), 距离5.0 | 结果false, 速度状态SpeedMax | 符合     |
| 4    | 超声数据原点(0, 0, PI / 6), 距离2.1 | 结果true, 速度状态Stop | 符合     |
| 5    | 超声数据原点(0, 0, -PI / 6), 距离2.1 | 结果true, 速度状态Stop | 符合     |
| 6    | 超声数据原点(0, 0, -PI / 6), 距离4.1 | 结果false, 速度状态SpeedOne | 符合     |
| 7    | 超声数据原点(0, 0, 0), 距离2.1 | 结果true, 速度状态Stop | 符合     |
| 8    | 超声数据原点(0, 0, PI / 4), 距离2.1 | 结果false, 速度状态SpeedOne | 符合      |

### 3. getSpeedLevel 测试用例

> 功能描述： 获取超声层当前计算得到的速度状态

初始化range_sensor_layer, 停障区{(-0.5, 0.5), (1.0, 0.5), (1.0, -0.5), (-0.5, -0.5)}, 减速区{(-1.0, 1.3), (1.8, 1.3), (1.8, -1.3), (-1.0, -1.3)},
超声数据范围0-4, 波束角60度
| 编号 | 输入/动作                                                              | 期望的输出/响应                                                         | 实际情况 |
| ---- | ---------------------------------------------------------------------- | ----------------------------------------------------------------------- | -------- |
| 1    | 超声数据原点(0, 0.3, PI / 2), 距离0.9, 额外减速区(0, 0), 额外停障区(0, 0) | 速度状态SpeedOne | 符合     |
| 2    | 超声数据原点(0, 0, 0), 距离1.5, 额外减速区(0, 0), 额外停障区(0, 0) | 速度状态SpeedOne | 符合     |
| 3    | 超声数据原点(0, 0, -PI), 距离1.5, 额外减速区(0, 0), 额外停障区(0, 0) | 速度状态SpeedMax | 符合     |
| 4    | 超声数据原点(0, 0, -PI / 2), 距离1.6 , 额外减速区(0, 0), 额外停障区(0, 0) | 速度状态SpeedMax | 符合     |
| 5    | 超声数据原点(0, 0, -PI / 2), 距离1.6, 额外减速区(0, -1.0), 额外停障区(0, 0) | 速度状态SpeedOne | 符合     |
| 6    | 超声数据原点(0, 0, -PI / 2), 距离1.6, 额外减速区(0, -1.0), 额外停障区(1.0, -1.0) | 速度状态Stop | 符合     |
| 7    | 超声数据原点(0, 0, -PI / 2), 超声1距离1.8, 超声2距离1.0,超声3距离0.3,额外减速区(0, 0), 额外停障区(0, 0) | 速度状态Stop | 符合     |
| 8    | 超声数据原点(0, 0, -PI / 2), 超声1距离1.8, 超声2距离1.0, 额外减速区(0, 0), 额外停障区(0, 0) | 速度状态SpeedOne | 符合      |
| 9    | 超声数据原点(0, 0, -PI / 2), 距离1.8, 额外减速区(0, 0), 额外停障区(0, 0) | 速度状态SpeedMax | 符合      |