

## costmap_2d 测试用例

> 开发人员： @chenmingjian 测试人员： @chenmingjian

### 1. 初始化costmap_2d测试用例

> 功能描述： 初始化costmap的x, y, reselution, origin_x, origin_y, default_value

| 编号 | 输入/动作                                    | 期望的输出/响应              | 实际情况 |
| ---- | -------------------------------------------- | ---------------------------- | -------- |
| 1    | 初始化costmap :1000, 1000, 0.005, 0.0, 0.0, 255| 获得costmap状态与设置状态相近 | 符合     |
| 2    | 初始化costmap :100, 100, -0.005, 0.0, 0.0, 0| 获得costmap状态与设置状态相近 | 符合     |
| 3    | 初始化costmap :10, 10, 0.5, -50, -50, 0| 获得costmap状态与设置状态相近 | 符合     |
| 4    | 初始化costmap :100, 100, 0.5, 1000, -1000, 0| 获得costmap状态与设置状态相近 | 符合     |

### 2. worldToMap 测试用例

> 功能描述： 世界坐标转化为costmap坐标

| 编号 | 输入/动作                                                              | 期望的输出/响应                                                         | 实际情况 |
| ---- | ---------------------------------------------------------------------- | ----------------------------------------------------------------------- | -------- |
| 1    | 用worldToMap转化世界坐标{-1.0, 1.0} | 转化失败 | 符合     |
| 2    | 用worldToMap转化世界坐标{1.0, -1.0} | 转化失败 | 符合     |
| 3    | 用worldToMap转化世界坐标{-1.0, -1.0} | 转化失败 | 符合     |
| 4    | 用worldToMap转化世界坐标{1.0, 1.0} | 转化成功, 转化点为{20, 20} | 符合     |
| 5    | 用worldToMap转化世界坐标{6.0, 1.0} | 转化失败 | 符合     |
| 6    | 用worldToMap转化世界坐标{1.0, 6.0} | 转化失败 | 符合     |
| 7    | 用worldToMap转化世界坐标{6.0, 6.0} | 转化失败 | 符合     |

| 编号 | 输入/动作                                                              | 期望的输出/响应                                                         | 实际情况 |
| ---- | ---------------------------------------------------------------------- | ----------------------------------------------------------------------- | -------- |
| 1    | 用worldToMapNoBounds转化世界坐标{-6.0, -6.0} | 转化点为{0, 0} | 符合     |
| 2    | 用worldToMapNoBounds转化世界坐标{1.0, 1.0} | 转化点为{20, 20} | 符合     |
| 3    | 用worldToMapNoBounds转化世界坐标{6.0, 1.0} | 转化点为{99, 20} | 符合     |
| 4    | 用worldToMapNoBounds转化世界坐标{1.0, 6.0} | 转化点为{20, 99} | 符合     |
| 5    | 用worldToMapNoBounds转化世界坐标{6.0, 6.0} | 转化点为{99, 99} | 符合     |

| 编号 | 输入/动作                                                              | 期望的输出/响应                                                         | 实际情况 |
| ---- | ---------------------------------------------------------------------- | ----------------------------------------------------------------------- | -------- |
| 1    | 用worldToMapEnforceBounds转化世界坐标{-6.0, -6.0} | 转化点为{0, 0} | 符合     |
| 2    | 用worldToMapEnforceBounds转化世界坐标{1.0, 1.0} | 转化点为{20, 20} | 符合     |
| 3    | 用worldToMapEnforceBounds转化世界坐标{6.0, 1.0} | 转化点为{99, 20} | 符合     |
| 4    | 用worldToMapEnforceBounds转化世界坐标{1.0, 6.0} | 转化点为{20, 99} | 符合     |
| 5    | 用worldToMapEnforceBounds转化世界坐标{6.0, 6.0} | 转化点为{99, 99} | 符合     |

| 编号 | 输入/动作                                                              | 期望的输出/响应                                                         | 实际情况 |
| ---- | ---------------------------------------------------------------------- | ----------------------------------------------------------------------- | -------- |
| 1    | 用worldToMapEnforceBounds转化世界坐标{20, 20} | 转化点为{1.025, 1.025} | 符合     |
| 2    | 用worldToMapEnforceBounds转化世界坐标{120, 20} | 转化点为{6.025, 1.025} | 符合     |
| 3    | 用worldToMapEnforceBounds转化世界坐标{20, 120} | 转化点为{1.025, 6.025} | 符合     |
| 4    | 用worldToMapEnforceBounds转化世界坐标{120, 120} | 转化点为{6.025, 6.025} | 符合     |

### 3. updateOrigin 测试用例

> 功能描述： 更新地图原点,拷贝重叠的部分

| 编号 | 输入/动作                                                              | 期望的输出/响应                                                         | 实际情况 |
| ---- | ---------------------------------------------------------------------- | ----------------------------------------------------------------------- | -------- |
| 1    | 初始化costmap, 将x坐标[5, 10),y坐标[5,10)的costmap赋为255,更新地图原点为{5, 5} | 赋值区域在costamp的坐标变为x坐标[0, 5),y坐标[0,5) | 符合     |

### 4. setConvexPolygon 模型测试用例

> 功能描述： 将Polygon内的costmap值设为指定值

| 编号 | 输入/动作                                                              | 期望的输出/响应                                                         | 实际情况 |
| ---- | ---------------------------------------------------------------------- | ----------------------------------------------------------------------- | -------- |
| 1    | 初始化polygon为{{2.0, 2.0}, {2.0, 8.0}, {8.0, 8.0}, {8.0, 2.0}}, 调用setConvexPolygonCost函数 | 设置成功,x坐标[2,9), y坐标[2,9)内的costmap值为3 | 符合     |
| 2    | 初始化polygon为{{2.0, 2.0}, {2.0, 8.0}}, 调用setConvexPolygonCost函数 | 设置失败,顶点数过少 | 符合     |
| 3    | 初始化polygon为{{100.0, 2.0}, {2.0, 8.0}, {8.0, 100.0}, {8.0, 2.0}}, 调用setConvexPolygonCost函数 | 设置失败,超范围 | 符合     |